<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Classes and Objects" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Classes and Objects - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Classes_and_Objects";
		var wgTitle = "Classes and Objects";
		var wgAction = "view";
		var wgArticleId = "46";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 935;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Classes_and_Objects skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Classes and Objects</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>The code examples are given for command-line Slag programs.  To test the following examples in Plasmacore, type "gogo build" in a new project, set it up with project name "Test" and then edit src/test.slag and insert the given example, changing "class Test" to be "class Test&nbsp;: Screen".
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Using_a_Class_in_Another_File"><span class="tocnumber">1</span> <span class="toctext">Using a Class in Another File</span></a></li>
<li class="toclevel-1"><a href="#Basics"><span class="tocnumber">2</span> <span class="toctext">Basics</span></a>
<ul>
<li class="toclevel-2"><a href="#Name_Example"><span class="tocnumber">2.1</span> <span class="toctext">Name Example</span></a></li>
<li class="toclevel-2"><a href="#Name_Analysis"><span class="tocnumber">2.2</span> <span class="toctext">Name Analysis</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Methods_as_Properties"><span class="tocnumber">3</span> <span class="toctext">Methods as Properties</span></a>
<ul>
<li class="toclevel-2"><a href="#Distance_Example"><span class="tocnumber">3.1</span> <span class="toctext">Distance Example</span></a></li>
<li class="toclevel-2"><a href="#Distance_Analysis"><span class="tocnumber">3.2</span> <span class="toctext">Distance Analysis</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Transparent_Access_Methods"><span class="tocnumber">4</span> <span class="toctext">Transparent Access Methods</span></a>
<ul>
<li class="toclevel-2"><a href="#Treasure_Chest_Example"><span class="tocnumber">4.1</span> <span class="toctext">Treasure Chest Example</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Operator_Methods"><span class="tocnumber">5</span> <span class="toctext">Operator Methods</span></a>
<ul>
<li class="toclevel-2"><a href="#Time_Example"><span class="tocnumber">5.1</span> <span class="toctext">Time Example</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Using_a_Class_in_Another_File" id="Using_a_Class_in_Another_File"></a><h2> <span class="mw-headline"> Using a Class in Another File </span></h2>
<p>When you start to have large files of code it's easier to segment them into different .slag files. When a programmer starts to do this they'll still want access to their code in other sections of their program.
</p><p>To access the contents of another slag file just add:
</p><p>"[include &lt;filename&gt;]"
</p><p>You will, of course, remove the parenthesis in your code. Following that you will also replace "&lt;filename&gt;" with your actual .slag file name.
</p>
<a name="Basics" id="Basics"></a><h2> <span class="mw-headline"> Basics </span></h2>
<a name="Name_Example" id="Name_Example"></a><h3> <span class="mw-headline"> Name Example </span></h3>
<pre> class Test
   METHODS
     method init
       local Name abe("Abe","Pralle")
       local var ty = Name("Ty","Heath")
 
       println( "$ and $ incorporated Plasmaworks" (abe.first,ty.first) )
         # Prints:
         #   Abe and Ty incorporated Plasmaworks
 
       println( //My name is $ - that's "$" on the roster.// (abe,abe.roster_form) )
         # Prints:
         #   My name is Abe Pralle - that's "Pralle, Abe" on the roster.
 endClass
 
 class Name( String first, String last )
   METHODS
     method to_String.String
       return "$ $" (first,last)
 
     method roster_form.String
       return "$, $" (last,first)
 endClass
</pre>
<a name="Name_Analysis" id="Name_Analysis"></a><h3> <span class="mw-headline"> Name Analysis </span></h3>
<pre> class Test
</pre>
<ul><li> Any number of classes may be defined per file.  By default an object of the topmost class is created and its <i>init()</i> method is called as the program starting point.
</li></ul>
<pre>   METHODS
</pre>
<ul><li> Classes are defined by section, with the two primary sections being METHODS and PROPERTIES (aka instance variables or object variables).  Other sections include CLASS_METHODS and CLASS_PROPERTIES (for <i>static</i> class members).
</li></ul>
<pre>     method init
</pre>
<ul><li> Slag's "initializers" are the constructors" of other languages.  They are named "init".
</li><li> By default a program starts at the <i>init()</i> method of the top class definition in a file.
</li></ul>
<pre>       local Name abe("Abe","Pralle")
       local var ty = Name("Ty","Heath")
</pre>
<ul><li> Local variables must be preceded by the keyword "local".
</li><li> The syntax "local Name abe(...)" is shorthand for "local Name abe = Name(...)".
</li><li> Writing the class name followed by an parenthesized argument list will create a new object.  The <i>new</i> keyword is not used as it is in other languages.  
</li><li> "local var ty = Name(...)" is shorthand for "local Name ty = Name(...)".  "var" is just a placeholder for whatever type the compiler determines is on the right-hand side of the assignment.
</li><li> No semicolons are required.
</li></ul>
<pre>       println( "$ and $ incorporated Plasmaworks" (abe.first,ty.first) )
</pre>
<ul><li> Writing <b>"$+$=$"(a,b,a+b)</b> is the shorthand equivalent of writing <b>a + "+" + b + "=" + (a+b)</b>.  <i>Formatted strings</i> use the syntax: "string" (args).  Any dollar signs in the string are <i>format markers</i> that are replaced by the <i>to_String()</i> versions of arguments in the following argument list.  This is a compile-time replacement.
</li><li> Properties (instance variables) may generally be directly accessed ("abe.first").  The concepts of <i>public</i> and <i>private</i> do not matter much in Slag; one of the primary reasons for using them does not apply (more on that later).
</li></ul>
<pre>       println( //My name is $ - that's "$" on the roster.// (abe,abe.roster_form) )
</pre>
<ul><li> Writing //string// is an alternate way to specify a literal string.
</li><li> Methods do not need parentheses if there are no arguments.
</li></ul>
<pre> endClass
</pre>
<ul><li> Slag's keywords are verbose camelCase: <i>class/endClass, while/endWhile, if/elseIf/else/endIf</i>, etcetera.
</li></ul>
<pre> class Name( String first, String last )
</pre>
<ul><li> Writing "Name( String first, String last )" is shorthand for:
</li></ul>
<pre> <i>class Name</i>
   <i>PROPERTIES</i>
     <i>first, last&nbsp;: String</i>
 
   <i>METHODS</i>
     <i>method init( String f, String l )</i>
       <i>first = f</i>
       <i>last = l</i>
     ...
 <i>endClass</i>
</pre>
<p><br />
</p>
<pre>   METHODS
     method to_String.String
       return "$ $" (first,last)
 
     method roster_form.String
       return "$, $" (last,first)
 endClass
</pre>
<ul><li> Methods are declared in the form "method name(Type1 param1, Type2 param22, ...).ReturnType".  The parentheses may be left off if there are no arguments.  The ".ReturnType" is left off if there is no return type.
</li><li> A trailing ":" is allowed on the method declaration (e.g. "to_String.String:"; writing it allows the body to be written on the same line if you so desire.
</li><li> When a method name incorporates a specific data type, that data type is capitalized as it was originally written.
</li></ul>
<a name="Methods_as_Properties" id="Methods_as_Properties"></a><h2> <span class="mw-headline"> Methods as Properties </span></h2>
<a name="Distance_Example" id="Distance_Example"></a><h3> <span class="mw-headline"> Distance Example </span></h3>
<pre>  class Test
    METHODS
      method init
        local Distance ruler()
        ruler.inches = 12
        println( "A ruler is $(.2) inches or $(.2) cm." (ruler.inches,ruler.cm) )
  
        local Distance kilometer()
        kilometer.km = 1
        println( "A kilometer is $ meters and $ miles." (kilometer.m,kilometer.miles) )
  endClass
  
  class Distance()
    PROPERTIES
      m&nbsp;: Real64
        # Distance is stored in meters and converted to all other
        # unit systems on the fly.
  
    METHODS
      method cm( Real64 n ):     m = n / 100
      method km( Real64 n ):     m = n * 1000
      method inches( Real64 n ): cm = n * 2.54
      method feet( Real64 n ):   inches = n * 12
      method miles( Real64 n ):  feet = n * 5280
  
      method cm.Real64:     return m * 100
      method km.Real64:     return m / 1000
      method inches.Real64: return cm / 2.54
      method feet.Real64:   return inches / 12
      method miles.Real64:  return feet / 5280
  endClass
</pre>
<a name="Distance_Analysis" id="Distance_Analysis"></a><h3> <span class="mw-headline"> Distance Analysis </span></h3>
<ul><li> Primitives are named Real64, Real32, Int64, Int32, Char, Byte, and Logical.  The first five are equivalent to types double, float, long, int, and char in Java.  "Byte" is equivalent to "unsigned char" in C++.  "Logical" may be used as a Java "boolean", but Logical is a ternary type that supports literal values <i>true</i>, <i>false</i>, and <i>void</i>.
</li><li> The string format "$(.2)" causes a real number to be displayed with exactly 2 digits after the decimal point.
</li><li> Writing "obj.x = 5.0" is shorthand for "obj.x(5.0)" if an <i>x(Real64)</i> method exists.  Such a method is called a <i>property-set method</i>.
</li><li> Writing "y = obj.x" is shorthand for "y = obj.x()" if an <i>x().Real64</i> method exists (the "Real64" could be any return type).  Such a method is called a <i>property-get method</i>.
</li><li> Do not be concerned as to whether "obj.x" is accessing a property or calling a method.  Think of <i>x</i> as just a <i>property</i> in either case.
</li><li> In short you can write methods that act like variables.
</li></ul>
<a name="Transparent_Access_Methods" id="Transparent_Access_Methods"></a><h2> <span class="mw-headline"> Transparent Access Methods </span></h2>
<ul><li> If you define property access methods, they will be called when you read or write a property.
</li><li> These access methods are transparent - outside of a class you do not know or need to know whether the variable is being directly accessed or whether its going through a property-set or property-get method.
</li><li> For a property "x&nbsp;: Real64", the property-get method that just returns the value of x would be "method x.Real64: return &amp;x".
</li><li> For "x&nbsp;: Real64", the property-set method that takes a new value and just set the property would be: "method x( Real64 new_x ): &amp;x = new_x".  There is a shorthand as well: "method x(x):".
</li><li> An ampersand (&amp;) bypasses access methods to allow direct property access.
</li></ul>
<a name="Treasure_Chest_Example" id="Treasure_Chest_Example"></a><h3> <span class="mw-headline"> Treasure Chest Example </span></h3>
<pre> class Test
   METHODS
     method init
       local TreasureChest chest(5000)
       println( chest.gold )  # prints -1 since the chest is closed
       chest.open
       println( chest.gold )  # prints 1000, the max amount
 endClass
 
 class TreasureChest( Int32 gold )
   PROPERTIES
     is_open&nbsp;: Logical
 
   METHODS
     method open:  is_open = true
     method close: is_open = false
 
     method gold.Int32
       # Returns -1 if the chest is closed.
 
       if (not is_open) 
         # All logical operators are spelled out in word form: 
         # and, or, xor, not.
         return -1
       endIf
 
       # Use ampersand (&amp;) to bypass any transparent access 
       # methods and directly access a property.
       return &amp;gold  
 
     method gold( Int32 new_amount )
       # 1000 gold pieces is the max
       if (new_amount &gt; 1000) new_amount = 1000
       &amp;gold = new_amount
 
 endClass
</pre>
<a name="Operator_Methods" id="Operator_Methods"></a><h2> <span class="mw-headline"> Operator Methods </span></h2>
<ul><li> Almost all arithmetic and bitwise operators may be made to work with objects of a given class by defining <i>operator methods</i> for that class.
</li><li> The binary operator methods that may be defined are: + - * / ^ &amp; |, of the form "method op+(SomeType rhs).SomeType".
</li><li> The unary operator methods that may be defined are: -&nbsp;!, of the form "op-.SomeType".
</li><li> The assignment operator cannot be defined in this way.
</li><li> Neither += nor ++ (etc.) may be defined in this way as underneath they are not distinct operators.  "x++" is shorthand for "x = x + 1" and "x += y" is shorthand for "x = x + y".
</li></ul>
<a name="Time_Example" id="Time_Example"></a><h3> <span class="mw-headline"> Time Example </span></h3>
<pre> class Test
   METHODS
     method init
       local Time now("10:58")
       local Time interval("2:03")
       local Time one("1:00")
       println( "The time is $." (now) )
       println( "$ after $ is $." (interval,now,now+interval) )
       println( "$ before $ is $." (interval,one,one-interval) )
 
       # Prints:
       #   The time is 10:58.
       #   2:03 after 10:58 is 1:01.
       #   2:03 before 1:00 is 11:57.
 endClass
 
 class Time( Int32 hours, Int32 minutes )
   METHODS
     method init( String time )
       local var values = time.split(':')
       hours = values[0].to_Int32
       minutes = values[1].to_Int32
 
     method to_String.String
       return "$:$(02)" (hours,minutes)
 
     method op+( Time other ).Time
       local Time result(hours,minutes)
       result.hours += other.hours
       result.minutes += other.minutes
       return result
 
     method op-( Time other ).Time
       local Time result(hours,minutes)
       result.hours -= other.hours
       result.minutes -= other.minutes
       return result
 
     method minutes(minutes)
       # Transparent property-set for 'minutes'.
       hours += minutes / 60
       &amp;minutes&nbsp;%= 60
 
     method hours(hours)
       # Transparent property-set for 'hours'.
       &amp;hours = hours.wrapped(1,12)
 endClass
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 12/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:46-0!1!0!!en!2!edit=0 and timestamp 20120628120512 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Classes_and_Objects</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 28 February 2011, at 14:06.</li>
					<li id="viewcount">This page has been accessed 3,176 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.241 secs. --><br></body></html>
