<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Plasmacore:Android Projects" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Plasmacore:Android Projects - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Plasmacore:Android_Projects";
		var wgTitle = "Plasmacore:Android Projects";
		var wgAction = "view";
		var wgArticleId = "114";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 1082;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Plasmacore_Android_Projects skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Plasmacore:Android Projects</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Android-Specific_Framework"><span class="tocnumber">1</span> <span class="toctext">Android-Specific Framework</span></a>
<ul>
<li class="toclevel-2"><a href="#General"><span class="tocnumber">1.1</span> <span class="toctext">General</span></a></li>
<li class="toclevel-2"><a href="#android.slag"><span class="tocnumber">1.2</span> <span class="toctext">android.slag</span></a></li>
<li class="toclevel-2"><a href="#Poor_Drawing_Performance_on_First_Generation_Models"><span class="tocnumber">1.3</span> <span class="toctext">Poor Drawing Performance on First Generation Models</span></a>
<ul>
<li class="toclevel-3"><a href="#Texture_Bit_Depth"><span class="tocnumber">1.3.1</span> <span class="toctext">Texture Bit Depth</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#SDK_Setup"><span class="tocnumber">2</span> <span class="toctext">SDK Setup</span></a>
<ul>
<li class="toclevel-2"><a href="#Windows"><span class="tocnumber">2.1</span> <span class="toctext">Windows</span></a></li>
<li class="toclevel-2"><a href="#Mac"><span class="tocnumber">2.2</span> <span class="toctext">Mac</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Compiling_and_Running"><span class="tocnumber">3</span> <span class="toctext">Compiling and Running</span></a>
<ul>
<li class="toclevel-2"><a href="#Windows_2"><span class="tocnumber">3.1</span> <span class="toctext">Windows</span></a></li>
<li class="toclevel-2"><a href="#Mac_2"><span class="tocnumber">3.2</span> <span class="toctext">Mac</span></a></li>
<li class="toclevel-2"><a href="#Debug_Certificate"><span class="tocnumber">3.3</span> <span class="toctext">Debug Certificate</span></a></li>
<li class="toclevel-2"><a href="#Release_.28Distribution.29_Build"><span class="tocnumber">3.4</span> <span class="toctext">Release (Distribution) Build</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Android-Specific_Framework" id="Android-Specific_Framework"></a><h2> <span class="mw-headline"> Android-Specific Framework </span></h2>
<a name="General" id="General"></a><h3> <span class="mw-headline"> General </span></h3>
<ul><li> The value ANDROID will be defined when you're compiling code for Android ("if (defined(ANDROID))" etc.).
</li><li> System.os will return the string "android" when you're running on an Android.
</li></ul>
<a name="android.slag" id="android.slag"></a><h3> <span class="mw-headline"> android.slag </span></h3>
<p>[include "android.slag"] to access the following methods:
</p>
<ul><li> Android.is_tablet().Logical
</li></ul>
<dl><dd> Returns "true" if code is running on a tablet-sized device.
</dd></dl>
<ul><li> Android.memory_class().Int32
</li></ul>
<dl><dd> Returns the number of megabytes that the OS allows per program.  This will be "16" for first generation devices, "24" many second-gen devices, and "32" or higher for most modern devices.
</dd></dl>
<p><br />
</p>
<a name="Poor_Drawing_Performance_on_First_Generation_Models" id="Poor_Drawing_Performance_on_First_Generation_Models"></a><h3> <span class="mw-headline"> Poor Drawing Performance on First Generation Models </span></h3>
<a name="Texture_Bit_Depth" id="Texture_Bit_Depth"></a><h4> <span class="mw-headline"> Texture Bit Depth </span></h4>
<p>Early Android devices have poor drawing performance.  This can be improved to playable levels through using 16 instead of 32-bit textures.  One way to decide at runtime is to check Android.memory_class() (see above) and use 16-bit textures if the result is "16".  Write the following command before you start loading images:
</p>
<pre> Texture.default_pixel_format = PixelFormat.rgb16
</pre>
<p>Another strategy is to set any orthogonal, opaque background images to "tile mode" ("img.render_flags |= Render.tile_mode").  These will draw much faster on Android.  Note: as of 3.5.0, these only draw correctly when the image Handle is at the default top-left.  This will be fixed in the next release.
</p>
<a name="SDK_Setup" id="SDK_Setup"></a><h2> <span class="mw-headline"> SDK Setup </span></h2>
<p>Download the latest <a href="http://plasmaworks.com/wiki/index.php?title=Plasmacore#Download" class="external text" title="http://plasmaworks.com/wiki/index.php?title=Plasmacore#Download" rel="nofollow">Plasmacore Framework</a> and set it up for your Windows or Mac machine as normal.  Then:
</p>
<a name="Windows" id="Windows"></a><h3> <span class="mw-headline"> Windows </span></h3>
<ul><li> In your Plasmacore project folder type "gogo install android" to install the Android module.
</li></ul>
<ul><li> Download the latest SDK and NDK from <a href="http://developer.android.com" class="external free" title="http://developer.android.com" rel="nofollow">http://developer.android.com</a>.  Unzip them to your user folder (/Users/yourlogin) to avoid issues with write permissions.  Add the "android-sdk-windows" directory to your system path (e.g. "c:\Users\yourlogin\android-sdk-windows\tools").
</li></ul>
<ul><li> Download and install the Java JDK (for Standard Edition, "Java SE") from <a href="http://java.sun.com" class="external free" title="http://java.sun.com" rel="nofollow">http://java.sun.com</a>.  Add the JDK's "bin" directory to your system path (e.g. "c:\Program Files (x86)\java\jdk1.6.0_20\bin").  This is necessary to run ANT.
</li></ul>
<ul><li> Download and install the ANT build system from <a href="http://ant.apache.org" class="external free" title="http://ant.apache.org" rel="nofollow">http://ant.apache.org</a>.  Place the uncompressed ANT directory (e.g. "apache-ant-1.8.0") in your "\Users\yourlogin" directory and add its "bin" directory to your system path (e.g. "\Users\yourlogin\apache-ant-1.8.0\bin").
</li></ul>
<ul><li> Install Cygwin from <a href="http://cygwin.com" class="external free" title="http://cygwin.com" rel="nofollow">http://cygwin.com</a>.  Use standard and recommended settings.  On the "Select Packages" step, click the "View" button on the right side to switch to "Full" view and choose "make" and "ant" to install (click on the word "Skip" to toggle to install).
</li></ul>
<ul><li> <i>cd</i> to "/cygdrive/c/yourlogin/android-sdk-windows" and type "./SDK\ Setup.exe &amp;" to start the Android GUI manager with component installer.  Install extra SDK components and set up and Android virtual machine with SD Card support.
</li></ul>
<ul><li> Open the <i>local.properties</i> file within your project folder. Add a line containing: "ANDROID_NDK: path/to/NDK" (e.g. "ANDROID_NDK: C:\Users\yourlogin\android-ndk"). 
</li></ul>
<ul><li> Make sure you install the <a href="http://developer.android.com/sdk/win-usb.html" class="external text" title="http://developer.android.com/sdk/win-usb.html" rel="nofollow">Android USB Driver for Windows</a>.
</li></ul>
<ul><li> <i>cd</i> to "/cygdrive/c/yourlogin/android-ndk-r5b" and type "build/host-setup.sh" to configure the NDK.
</li></ul>
<p><b>Caveats</b>
</p>
<ul><li> Placing android-ndk, your project directory, or any of the other build tools in a path that contains spaces will cause problems when working with cygwin.
</li></ul>
<p>The following error was generated during "gogo android-vm" (Compiling and Running). It was fixed by moving the project source out of 'Documents and Settings'.
</p>
<pre> Android NDK: There is no Android.mk under /cygdrive/C/Documents and Settings/For
 rest/Documents/SRC/gamedev/plasmacore-3.0.10-beta/inchworm/platforms/android/jni
 
 Android NDK: If this is intentional  please define APP_BUILD_SCRIPT to point
 Android NDK: to a valid NDK build script.
 build/core/add-application.mk:100: *** Android NDK: Aborting...    .  Stop.
</pre>
<ul><li> Installing apps to your Android device may only work when the cable is plugged into a particular USB port (possibly the first one ever used for that purpose).
</li></ul>
<ul><li> You must install Android SDK 1.6 when installing SDK components (even if you intend to compile for later versions).
</li></ul>
<p>The following error was generated during "gogo android-vm" for Android version 2.0.1. It was fixed by installing version 1.6 from the Android GUI manager.
</p>
<pre> [exec] BUILD FAILED
 [exec] C:\devel\gamedev\plasmacore-3.0.10-beta\inchworm\platforms\android\build.xml:65: Unable 
 to resolve target 'android-4'
</pre>
<a name="Mac" id="Mac"></a><h3> <span class="mw-headline"> Mac </span></h3>
<ul><li> In your Plasmacore project folder type "./gogo install android" to install the Android module.
</li></ul>
<ul><li> Download the latest SDK and NDK from <a href="http://developer.android.com" class="external free" title="http://developer.android.com" rel="nofollow">http://developer.android.com</a>.  Unzip them to your /Applications folder.
</li></ul>
<ul><li> Create or modify "~/.profile" to include the following two lines:
</li></ul>
<pre> export PATH="/Applications/android-sdk-mac_x86/tools:$PATH"
</pre>
<ul><li> Open a Terminal prompt (Applications-&gt;Utilities-&gt;Terminal) and type "android &amp;" to start the Android manager GUI.  Install extra SDK components and set up an Android virtual machine with SD Card support.
</li></ul>
<ul><li> <i>cd</i> to "/Applications/android-ndk-r3" (or more recent version) and type "build/host-setup.sh" to configure the NDK.
</li></ul>
<a name="Compiling_and_Running" id="Compiling_and_Running"></a><h2> <span class="mw-headline"> Compiling and Running </span></h2>
<p>Go to Settings-&gt;Applications on your Android phone and ensure that "Unknown sources (Allow...)" is checked.
</p>
<a name="Windows_2" id="Windows_2"></a><h3> <span class="mw-headline"> Windows </span></h3>
<ul><li> Open a Cygwin command prompt and <i>cd</i> to your Plasmacore project folder.
</li></ul>
<ul><li> Type "gogo android-vm" to compile and install the virtual machine build on your active simulator or plugged-in phone.  This is faster to compile than the cross-compiled build and will throw an exception on a null reference error instead of crashing.
</li></ul>
<ul><li> Type "gogo android-xc" to cross-compile to Java/C++ and install on your active simulator or plugged-in phone.  This runs faster than the VM build but will crash on a null reference error.
</li></ul>
<a name="Mac_2" id="Mac_2"></a><h3> <span class="mw-headline"> Mac </span></h3>
<ul><li> Open a Terminal prompt and <i>cd</i> to your Plasmacore project folder.
</li></ul>
<ul><li> Type "./gogo android-vm" to compile and install the virtual machine build on your active simulator or plugged-in phone.  This is faster to compile than the cross-compiled build and will throw an exception on a null reference error instead of crashing.
</li></ul>
<ul><li> Type "./gogo android-xc" to cross-compile to Java/C++ and install on your active simulator or plugged-in phone.  This runs faster than the VM build but will crash on a null reference error.
</li></ul>
<p><br />
</p>
<a name="Debug_Certificate" id="Debug_Certificate"></a><h3> <span class="mw-headline"> Debug Certificate </span></h3>
<ul><li> To have the Android build system generate a debug certificate (it'll gripe if it needs one), cd to "platforms/android" and type "ant debug".
</li></ul>
<a name="Release_.28Distribution.29_Build" id="Release_.28Distribution.29_Build"></a><h3> <span class="mw-headline"> Release (Distribution) Build </span></h3>
<p>There is currently no helper functionality in Plasmacore for creating a signed release build.  Perform a regular android-xcoor android-vm build to set everything up, <i>cd</i> into "platforms/android", and then follow the official Android developer instructions to prepare your release.  For example, typing "ant install" at that location would compile and install a debug version.
</p>
<!-- 
NewPP limit report
Preprocessor node count: 14/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:114-0!1!0!!en!2!edit=0 and timestamp 20120628114347 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Plasmacore:Android_Projects</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 2 July 2011, at 21:36.</li>
					<li id="viewcount">This page has been accessed 5,198 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.243 secs. --><br></body></html>
