<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Plasmacore v3.4,Plasmacore v3.0,Plasmacore v3.1,Plasmacore v3.2,Plasmacore v3.3" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Plasmacore v3.4 - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Plasmacore_v3.4";
		var wgTitle = "Plasmacore v3.4";
		var wgAction = "view";
		var wgArticleId = "143";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 1063;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Plasmacore_v3_4 skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Plasmacore v3.4</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#3.4_Overview"><span class="tocnumber">1</span> <span class="toctext">3.4 Overview</span></a></li>
<li class="toclevel-1"><a href="#Download"><span class="tocnumber">2</span> <span class="toctext">Download</span></a></li>
<li class="toclevel-1"><a href="#Change_Log_for_3.4.0_.28May_27.2C_2011.29"><span class="tocnumber">3</span> <span class="toctext">Change Log for 3.4.0 (May 27, 2011)</span></a>
<ul>
<li class="toclevel-2"><a href="#Weak_References"><span class="tocnumber">3.1</span> <span class="toctext">Weak References</span></a></li>
<li class="toclevel-2"><a href="#Signals"><span class="tocnumber">3.2</span> <span class="toctext">Signals</span></a>
<ul>
<li class="toclevel-3"><a href="#Timer_Class"><span class="tocnumber">3.2.1</span> <span class="toctext">Timer Class</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Display_Transforms"><span class="tocnumber">3.3</span> <span class="toctext">Display Transforms</span></a></li>
<li class="toclevel-2"><a href="#PropertyTable"><span class="tocnumber">3.4</span> <span class="toctext">PropertyTable</span></a></li>
<li class="toclevel-2"><a href="#Miscellaneous"><span class="tocnumber">3.5</span> <span class="toctext">Miscellaneous</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Previous_Versions"><span class="tocnumber">4</span> <span class="toctext">Previous Versions</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="3.4_Overview" id="3.4_Overview"></a><h2> <span class="mw-headline"> 3.4 Overview </span></h2>
<ul><li> Added Weak References
</li><li> Added PropertyTable and related classes that allows you to work with JSON data in a JavaScript style.
</li><li> Revamped EventHandler classes into SignalHandler classes.  It's now very easy to immediately raise a Signal with an arbitrary string and object argument - or queue it for later - and to define handlers for arbitrary signals.
</li></ul>
<p><br />
</p>
<a name="Download" id="Download"></a><h2> <span class="mw-headline"> Download </span></h2>
<ul><li> <a href="plasmacore_3.4.0.zip" class="external text" title="http://www.plasmaworks.com/files/plasmacore/archive/v/3.4.0/plasmacore-3.4.0.zip" rel="nofollow">Plasmacore v3.4.0</a> (2011.05.27, Windows/Mac/Linux/iPhone/iPad/Android/Windows Phone 7)
</li></ul>
<ul><li> To start a new project, unzip the file above, open in a command prompt in the new_project folder, and type:
</li></ul>
<dl><dd><ul><li> Windows:
</li></ul>
</dd></dl>
<pre> gogo build
</pre>
<dl><dd><ul><li> Mac, Linux:
</li></ul>
</dd></dl>
<pre> chmod +x gogo
 ./gogo build
</pre>
<ul><li> To upgrade an existing project, run "gogo upgrade" once to upgrade the core module, run "gogo" to finish the install, and then run "gogo upgrade" once more time to upgrade the auxiliary modules.
</li></ul>
<p><br />
</p><p><br />
</p>
<a name="Change_Log_for_3.4.0_.28May_27.2C_2011.29" id="Change_Log_for_3.4.0_.28May_27.2C_2011.29"></a><h2> <span class="mw-headline"> Change Log for 3.4.0 (May 27, 2011) </span></h2>
<a name="Weak_References" id="Weak_References"></a><h3> <span class="mw-headline"> Weak References </span></h3>
<ul><li> Added weak references to Slag.  A weak reference to a target object does not keep the target object from being reclaimed during garbage collection.  If the object <i>is</i> reclaimed, the target object of the weak reference will be set to "null".  Base class "WeakReference" stores a generic Object while class "Weak&lt;&lt;$DataType&gt;&gt;" is a templatized version.
</li></ul>
<pre> Weak&lt;&lt;Image&gt;&gt; img( Image("whatever.png") )
 ...
 if (img.object?) img.object.draw( x, y )
 else             println( "Referenced object no longer exists." )
</pre>
<dl><dd> Weak references are unnecessary most of the time.  One primary use of weak references is to have event managers store lists of event listeners without preventing those listeners from being reclaimed if they have no other references.
</dd></dl>
<p><br />
</p>
<a name="Signals" id="Signals"></a><h3> <span class="mw-headline"> Signals </span></h3>
<ul><li> Renamed Event/EventHandler system to Signal/SignalHandler and made functional improvements.  By example:
</li></ul>
<pre>   # Install "update" handler that fires before all other update 
   # handlers (the default)
   SignalHandler("update") with
     method on( Signal s )
       println( "Updating last" )
   endWith
 
   # Explicitly have the handler fire first
   SignalHandler( "update", SignalHandler.insert ) with ...
 
   # Create a signal handler that fires last
   SignalHandler( "textures_lost", SignalHandler.append ) with ...
 
   # Create a signal handler that blocks previous handlers from executing
   SignalHandler( "launch", SignalHandler.exclusive ) with ...
 
   # Create a signal handler that calls on(Signal) on an external
   # SignalListener object.
   class SigTest&nbsp;: Screen, SignalListener
     method init
       SignalHandler( "update", SignalHandler.insert, this )
 
     method on( Signal signal )
       println( "Signal $ received with argument:$." (signal.id,signal.argument) )
   endClass
 
   # Raise a custom signal with Object argument to be dispatched immediately
   Signal( "name_changed", new_name ).raise
 
   # Queue a custom signal to be raised after the current signal handler (update/draw)
   # is finished.
   Signal( "yay numbers", Int32{5,6,7} ).queue
</pre>
<p><br />
</p>
<a name="Timer_Class" id="Timer_Class"></a><h4> <span class="mw-headline"> Timer Class </span></h4>
<p><strike>A simple Timer utility class is now included with Plasmacore.  It raises a timer signal every N ticks, where N is selectable.  Multiple intervals can be scheduled.  Type "gogo doc Timer" for more info.</strike>
<i>The Timer has been revamped - see update notes for 3.4.1, above.</i>
</p>
<a name="Display_Transforms" id="Display_Transforms"></a><h3> <span class="mw-headline"> Display Transforms </span></h3>
<ul><li> Added convenience methods to transform the display.  Call Display.rotate(Degrees or Radians), Display.translate(Vector2 or Real64,Real64), Display.scale(Vector2 or Real64), or Display.transform(rotation,translation,scaling) to set a screen transform and Display.clear_transform() to restore it to normal.  These methods are not cumulative, but their effects do persist across update/draw cycles, so calling Display.rotate(Degrees(45)) will permanently rotate the display until you call Display.clear_transform().  Mouse events are automatically inversely transformed so that they still read correctly relative to the transformed display.
</li></ul>
<p><br />
</p>
<a name="PropertyTable" id="PropertyTable"></a><h3> <span class="mw-headline"> PropertyTable </span></h3>
<p>Added a collection of classes that implement JavaScript/JSON-style property tables.
</p>
<ul><li> Dynamically set and get members of a property table using arbitrary identifiers that are internally mapped to strings.  Manipulate property table values as you would in JavaScript.  For example:
</li></ul>
<pre> local PropertyTable properties()
 properties.three = 3
 properties.four = "4"
 println( properties.three + properties.four )           # Prints: 34
 println( properties.three + properties.four.as_Real64 ) # Prints: 7
 println( properties.three * properties.four )           # Prints: 12
 println( properties.three.as_String == "3" )            # Prints: true
</pre>
<ul><li> A property table value will be literal "null" if it doesn't exist.
</li><li> A PropertyList echoes the functionality of a Slag ArrayList:
</li></ul>
<pre> local PropertyList values()
 values.add( "four" )
 values.add( 5 )
 values.add( "xyz" )
 println( values.count )  # Prints: 3
 println( values[0] )     # Prints: four
 values[2] = "abc"
 forEach (value in values)
   println( value )       # Prints: four, 5, abc
 endForEach
</pre>
<ul><li> You can add or assign numbers, strings, other PropertyTable objects, and other PropertyList objects to existing PropertyTable objects and PropertyList objects.
</li></ul>
<pre> local PropertyTable properties()
 
 local PropertyTable today()
 today.year = 2011
 today.month = "May"
 today.day = 24
 properties.today = today
 
 # OR
 properties.today = PropertyData( //{year:2011,month:"May",day:24}// )
 
 forEach (key in properties.keys)
   println( "$&nbsp;: $" (key,properties[key]) )  # Prints: today&nbsp;: {year:2011,month:"May",day:24}
 endForEach
  
 forEach (key in properties.today.keys)
   println( "$&nbsp;: $" (key,properties.today[key]) )
     # Prints:
     #   year&nbsp;: 2011
     #   month&nbsp;: May
     #   day&nbsp;: 24
 endForEach 
</pre>
<ul><li> Property tables are compatible with JSON notation.  They can read and write strict JSON but by default they read and write a looser variant of JSON (quotes are not required on identifiers and nested keys assume value "true" if no other value is specified).
</li></ul>
<pre> local PropertyTable table()
 table.abe = PropertyData( //{name:"abe",year:2011,is_cool}// )
 println( table.to_String )  # Prints: {name:"abe",year:2011,is_cool}
 println( table.to_json )    # Prints: {"name":"abe","year":2011,"is_cool":true}
 table = PropertyTable( table.to_json )     # New property table from literal String
 table.save( DataFile("test.properties") )  # File or DataFile is fine
 table.load                                 # Loads from the last file object used in save()
 table.load( DataFile("other.json") )       # Some other properties file
 table.save                                 # Saves to the last file object used in load()
</pre>
<ul><li> Great for saving game data!
</li></ul>
<a name="Miscellaneous" id="Miscellaneous"></a><h3> <span class="mw-headline"> Miscellaneous </span></h3>
<ul><li> Added a special aspect called "ManagerCreates".  Most objects in Slag are created through the standard system, but a few special ones are created through manager singletons.  For example, prior to 3.4.0 you couldn't write "String(bytes)" to create a string from some bytes - you had to write "String.create_from(bytes)", which was really calling "StringManager.create_from(bytes)".
</li></ul>
<dl><dd> If you incorporate the ManagerCreates aspect in class e.g. String, any calls to "String(bytes)" are automatically converted to "StringManager.create_from(bytes)".
</dd></dl>
<ul><li> Added a default implementation of hash_code() in base class Object.  It returns the lower 32 bits of the object's memory location.
</li></ul>
<ul><li> Removed vestigial "SystemEvent" class.  If you have code that relies on the legacy ResourceLoader's <i>resources_loaded</i> SystemEvent, refactor your Screen to incorporate aspect SignalListener and listen for the signal "ResourceManager::resources_loaded" (refer to class SigTest in the example above).
</li></ul>
<ul><li> Added special convenience aspect "StringIDAccess".  Accesses to non-existent identifiers in classes that incorporate aspect StringIDAccess will be converted into get/set calls that pass the identifier as a string.  For example:
</li></ul>
<pre> # Given that class Values incorporates StringIDAccess:
 class Values&nbsp;: StringIDAccess;
 ...
 local Values values()
 
 # then writing this code:
 values.year = 2011
 values.month = "May"
 println( values.year )
 println( values.month )
 
 # is the same as writing this code:
 values.set( "year", 2011 )
 values.set( "month", "May" )
 println( values.get("year") )
 println( values.get("month") )
</pre>
<ul><li> Event types (MouseEvent, etc.) have been changed from being compounds to being classes and now extend base class Event.
</li></ul>
<ul><li> A new ScreenEvent class has been defined that encompasses update(), draw(), on_activate(), etc.
</li></ul>
<dl><dd><ul><li> The default implementation of on(ScreenEvent) calls the appropriate method (update, draw, etc.).
</li></ul>
</dd></dl>
<p><br />
</p>
<a name="Previous_Versions" id="Previous_Versions"></a><h2> <span class="mw-headline"> Previous Versions </span></h2>
<ul><li> <a href="plasmacore_v32.html" title="Plasmacore v3.3">Plasmacore_v3.3</a>
</li><li> <a href="plasmacore_v33.html" title="Plasmacore v3.2">Plasmacore_v3.2</a>
</li><li> <a href="plasmacore_v34.html" title="Plasmacore v3.1">Plasmacore_v3.1</a>
</li><li> <a href="plasmacore_v35.html" title="Plasmacore v3.0">Plasmacore_v3.0</a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor node count: 11/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:143-0!1!0!!en!2!edit=0 and timestamp 20120628194430 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Plasmacore_v3.4</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 19 June 2011, at 00:19.</li>
					<li id="viewcount">This page has been accessed 2,463 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.273 secs. --><br></body></html>
