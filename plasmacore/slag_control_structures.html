<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Slag:Control Structures,Slag:Advanced ForEach" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Slag:Control Structures - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Slag:Control_Structures";
		var wgTitle = "Slag:Control Structures";
		var wgAction = "view";
		var wgArticleId = "40";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 586;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Slag_Control_Structures skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Slag:Control Structures</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Single_Line_vs_Multi-Line_Commands"><span class="tocnumber">1</span> <span class="toctext">Single Line vs Multi-Line Commands</span></a></li>
<li class="toclevel-1"><a href="#If"><span class="tocnumber">2</span> <span class="toctext">If</span></a></li>
<li class="toclevel-1"><a href="#Which_and_WhichIs"><span class="tocnumber">3</span> <span class="toctext">Which and WhichIs</span></a></li>
<li class="toclevel-1"><a href="#Contingent"><span class="tocnumber">4</span> <span class="toctext">Contingent</span></a></li>
<li class="toclevel-1"><a href="#While"><span class="tocnumber">5</span> <span class="toctext">While</span></a></li>
<li class="toclevel-1"><a href="#Loop"><span class="tocnumber">6</span> <span class="toctext">Loop</span></a></li>
<li class="toclevel-1"><a href="#ForEach"><span class="tocnumber">7</span> <span class="toctext">ForEach</span></a></li>
<li class="toclevel-1"><a href="#Try.2FCatch_.26_Throw"><span class="tocnumber">8</span> <span class="toctext">Try/Catch &amp; Throw</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Single_Line_vs_Multi-Line_Commands" id="Single_Line_vs_Multi-Line_Commands"></a><h2> <span class="mw-headline"> Single Line vs Multi-Line Commands </span></h2>
<ul><li> <i>if</i>, <i>while</i>, and <i>forEach</i> support single line commands as well as multi-line commands.
</li><li> If a control structure has commands on the same line after the condition, it is taken to be a single line statement - all commands on that line (separated by semi-colons) are part of the body and no terminal end marker is required.
</li><li> If a control structure doesn't have commands immediately following the condition, it's considered a multi-line command and an appropriate "end" command is looked for.
</li><li> A multi-part <i>if/elseIf/else</i> cannot mix and match single and multi-line blocks. They must all be single or all be multi (otherwise nested <i>if</i> statements could be ambiguous).
</li><li> Single line statements may not have any nested control structures.
</li></ul>
<p><br /> 
</p>
<a name="If" id="If"></a><h2> <span class="mw-headline"> If </span></h2>
<p>Syntax:
</p>
<pre> if (condition)
   ...
 elseIf (condition)
   ...
 else
   ...
 endIf
</pre>
<pre> if (condition) single; line; commands
 elseIf (condition) single; line; commands
 else single; line; commands
</pre>
<p><br />
Example:
</p>
<pre> if (x &gt; 0) println( "$ is positive" (x) )
 elseIf (x &lt; 0) println( "$ is negative" (x) )
 else println( "0 is zero" )
</pre>
<ul><li> Like all conditionals in Slag, <i>if</i> requires parentheses around the condition.
</li><li> <i>escapeIf</i> skips to the command after the enclosing <i>endIf</i>.
</li></ul>
<p><br /> 
</p>
<a name="Which_and_WhichIs" id="Which_and_WhichIs"></a><h2> <span class="mw-headline"> Which and WhichIs </span></h2>
<p>Example:
</p>
<pre> which (ch)
   case  9: return "TAB"
   case 10, 13: return "EOL"  # well, kinda...
   case 27: return "ESC"
   case 32..126: return ""+Char(ch)
   others: return "^" + Char(ch+64)
 endWhich
</pre>
<pre> whichIs (day)
   case Day.saturday, Day.sunday:
     println( "weekend" )
 
   others:
     println( "weekday" )
 endWhichIs
</pre>
<ul><li> The <i>which</i> structure replaces the <i>switch</i> or <i>select</i> of other languages.
</li><li> A <i>case</i> may be any expression and is not limited to being a constant.
</li><li> Internally <i>which</i> statements are converted into <i>if</i> statements. The expression is saved in a local variable and then compared to each case value.
</li><li> <i>which</i> cases resolve to "==" comparisons while <i>whichIs</i> cases resolve to "is" comparisons.
</li><li> No <i>break</i> commands are necessary.
</li><li> <i>others:</i> replaces <i>default:</i>
</li><li> Independent values can be part of the same case when separated by commas ("case a,b,c:" ).
</li><li> A case may contain a simple range of values, e.g. "case 1..10:".  This is converted into a two-part conditional ("if (temp_value &gt;= 1 and temp_value &lt;= 10)").
</li><li> <i>escapeWhich</i> skips to the command after the enclosing <i>endWhich</i> and likewise for <i>escapeWhichIs</i>.
</li></ul>
<p><br />
</p>
<a name="Contingent" id="Contingent"></a><h2> <span class="mw-headline"> Contingent </span></h2>
<p>Syntax:
</p>
<pre> contingent
   # body (regular commands)
   ...
   necessary (condition)
   ...
   sufficient (condition)
   ...
 satisfied
   # commands if execution reaches end of body or any 'sufficient' cmd true 
 unsatisfied
   # commands if any 'necessary' tests false.
 endContingent
</pre>
<p>Example:
</p>
<pre> method print_primes( Int32 low, Int32 high ):
   forEach (n in low..high)
     contingent
       necessary (n &gt;= 2)
       sufficient (n == 2)
       forEach (d in {2,3..sqrt(n) step 2})
         necessary (n&nbsp;% d&nbsp;!= 0)
       endForEach
     satisfied
       println( "$ is a prime number" (n) )
     endContingent
   endForEach
</pre>
<ul><li> Slag introduces <i>contingents</i> as a new kind of conditional. They are similar in flow to a try/catch block but they deal with positive and negative logic tests rather than error generation.
</li><li> They are useful when it will take several consecutive commands to determine whether to execute "success" or "failure" code.
</li><li> Any commands may be placed in the body. These commands can include <i>necessary(...)</i> and <i>sufficient(...)</i> logic tests.
</li><li> If a necessary condition is true, execution proceeds to the next command. If false, execution jumps to the <i>unsatisfied</i> clause.
</li><li> If a sufficient condition is false, execution proceeds. If true, execution jumps to the <i>satisfied</i> clause.
</li><li> If all the body code is executed with no necessary conditions being false and no sufficient conditions being true, execution proceeds with the satisfied clause.
</li><li> If the satisfied clause executes, the unsatisfied clause is skipped.
</li><li> The satisfied and unsatisfied clauses are both optional.  If one or the other is not present the contingent behaves as if it were empty.
</li><li> <i>escapeContingent</i> skips to the command after the enclosing <i>endContingent</i>.
</li></ul>
<p><br /> 
</p>
<a name="While" id="While"></a><h2> <span class="mw-headline"> While </span></h2>
<p>Syntax:
</p>
<pre> while (condition)
   ...
 endWhile
</pre>
<pre> while (condition) single; line; commands
</pre>
<p>Example:
</p>
<pre> # Sum together the digits of a non-negative integer until one digit is left.
 while (n &gt; 0)
   n = n/10 + n%10
 endWhile
</pre>
<ul><li> <i>escapeWhile</i> skips to the command after the enclosing <i>endWhile</i>.
</li><li> <i>nextIteration</i> skips the remainder of the current iteration and proceeds onto the next iteration.
</li></ul>
<p><br /> 
</p>
<a name="Loop" id="Loop"></a><h2> <span class="mw-headline"> Loop </span></h2>
<p>Syntax:
</p>
<pre> loop
   ...
 endLoop
</pre>
<p>Example:
</p>
<pre> # Keep reading in numbers from some reader until a zero is read.
 loop
   local var n = reader.read
   if (n == 0) escapeLoop
   list.add(n)
 endLoop
</pre>
<ul><li> <i>loop</i> loops indefinitely and is a convenient alternative to "while (true) ...".
</li><li> <i>escapeLoop</i> skips to the command after the enclosing <i>endLoop</i>.
</li><li> <i>nextIteration</i> skips the remainder of the current iteration and proceeds onto the next iteration.
</li></ul>
<p><br /> 
</p>
<a name="ForEach" id="ForEach"></a><h2> <span class="mw-headline"> ForEach </span></h2>
<p>Syntax:
</p>
<pre> # multi-line variants
 forEach (range)
   ...
 endForEach
</pre>
<pre> forEach (var_name in range)
   ...
 endForEach
</pre>
<pre> forEach (var_name of range)
   ...
 endForEach
</pre>
<pre> # single line variants
 forEach (range) single; line; commands
</pre>
<pre> forEach (var_name in range) single; line; commands
</pre>
<pre> forEach (var_name of range) single; line; commands
</pre>
<p>Examples:
</p>
<pre> forEach (1..100) println("I will use iteration to make my life easier.")
</pre>
<pre> forEach (line in LineReader(File("settings.txt"))) println(line)
</pre>
<pre> forEach (ch in "nilbog".reverse_order) print(ch)
 println
</pre>
<pre> forEach (entity in mobs)
   entity.update
   if (entity.is_dead) removeCurrent entity
 endForEach
</pre>
<pre> method index_of( Real64 n ).Int32:
   forEach (index of data)
     if (data[index] == n) return index
   endForEach
   return -1
</pre>
<ul><li> <i>escapeForEach</i> skips to the command after the enclosing <i>endForEach</i>.
</li><li> <i>nextIteration</i> skips the remainder of the current iteration and proceeds onto the next iteration.
</li><li> Read the notes on <a href="slag_advanced_foreach.html" title="Slag:Advanced ForEach">advanced <i>forEach</i></a> usage to learn about:
<ul><li> How <i>forEach</i> loops are processed internally.
</li><li> How to write classes that are compatible with <i>forEach</i>.
</li><li> What causes concurrent modification errors and how to avoid them.
</li><li> How the <i>removeCurrent</i> command works.
</li></ul>
</li></ul>
<p><br />
</p>
<a name="Try.2FCatch_.26_Throw" id="Try.2FCatch_.26_Throw"></a><h2> <span class="mw-headline"> Try/Catch &amp; Throw </span></h2>
<p>Syntax:
</p>
<pre> try
   ...
 catch (MostSpecificType err)
   ...
 catch (LessSpecificType err)
   ...
 catch (MostGeneralType err)
   ...
 endTry
</pre>
<pre> throw Error("badwrong")
</pre>
<p>Example:
</p>
<pre> try
   load_save_data( File("save.txt") )
 catch (FileError err)
   set_up_default_data()
 endTry
</pre>
<ul><li> The <i>throw</i> command takes an Exception (or subclass) object and unwinds the call stack to the most recently-defined catch of the correct type, no matter many nested calls you're currently in.
</li><li> Class Error extends class Exception and all built-in exceptions are extended from type Error.
</li><li> There are no checked exceptions in Slag - errors may be thrown at any time (without writing a declaration in the method signature) and enclosing <i>try/catch</i> blocks are entirely optional.
</li><li> Exception objects that are <i>instanceOf</i> the first catch type are handled by that catch and the other catches are skipped.
</li><li> Slag does not have a <i>finally</i> clause.
</li></ul>

<!-- 
NewPP limit report
Preprocessor node count: 9/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:40-0!1!0!!en!2!edit=0 and timestamp 20120628114439 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Slag:Control_Structures</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 18 May 2010, at 01:46.</li>
					<li id="viewcount">This page has been accessed 1,040 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.248 secs. --><br></body></html>
