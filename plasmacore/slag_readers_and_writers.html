<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Slag:Readers and Writers" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Slag:Readers and Writers - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Slag:Readers_and_Writers";
		var wgTitle = "Slag:Readers and Writers";
		var wgAction = "view";
		var wgArticleId = "98";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 832;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Slag_Readers_and_Writers skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Slag:Readers and Writers</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>Virtually all Slag I/O is expressed in terms of templated Readers and Writers that are specialized and extended to handle specific data types.
</p><p>Something that incorporates Readable&lt;&lt;Char&gt;&gt; can have <i>create_reader()</i> called on it, which in turn instantiates and returns a Reader&lt;&lt;Char&gt;&gt; object - likewise with Writers and Writable things.  <i>forEach</i> loops work with both Readable objects and Reader objects, automatically calling <i>create_reader()</i> on the former.
</p><p>In Slag terminology, a Reader&lt;&lt;DataType&gt;&gt; <i>reads</i> a single unit of "DataType" at a time and a Writer&lt;&lt;DataType&gt;&gt; <i>writes</i> a single unit of "DataType" at a time.  Actions such as <i>printing</i>, <i>scanning</i>, and <i>inputting</i> require extra translation between datatypes and values and thus do not use the method names <i>read</i> and <i>write</i>.
</p><p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Common_Reader_Classes_and_Aspects"><span class="tocnumber">1</span> <span class="toctext">Common Reader Classes and Aspects</span></a></li>
<li class="toclevel-1"><a href="#Common_Writer_Classes_and_Aspects"><span class="tocnumber">2</span> <span class="toctext">Common Writer Classes and Aspects</span></a></li>
<li class="toclevel-1"><a href="#Using_StringBuilder"><span class="tocnumber">3</span> <span class="toctext">Using StringBuilder</span></a></li>
<li class="toclevel-1"><a href="#Working_with_Files"><span class="tocnumber">4</span> <span class="toctext">Working with Files</span></a>
<ul>
<li class="toclevel-2"><a href="#Read_Every_Character_From_A_File"><span class="tocnumber">4.1</span> <span class="toctext">Read Every Character From A File</span></a></li>
<li class="toclevel-2"><a href="#Load_a_File_as_a_Byte_List"><span class="tocnumber">4.2</span> <span class="toctext">Load a File as a Byte List</span></a></li>
<li class="toclevel-2"><a href="#Load_a_File_as_a_String"><span class="tocnumber">4.3</span> <span class="toctext">Load a File as a String</span></a></li>
<li class="toclevel-2"><a href="#Load_Each_Line_of_a_File_as_a_String"><span class="tocnumber">4.4</span> <span class="toctext">Load Each Line of a File as a String</span></a></li>
<li class="toclevel-2"><a href="#Creating_a_Text_File"><span class="tocnumber">4.5</span> <span class="toctext">Creating a Text File</span></a></li>
<li class="toclevel-2"><a href="#Creating_a_Binary_File"><span class="tocnumber">4.6</span> <span class="toctext">Creating a Binary File</span></a></li>
<li class="toclevel-2"><a href="#Reading_a_Binary_File"><span class="tocnumber">4.7</span> <span class="toctext">Reading a Binary File</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Common_Reader_Classes_and_Aspects" id="Common_Reader_Classes_and_Aspects"></a><h2> <span class="mw-headline"> Common Reader Classes and Aspects </span></h2>
<p>For documentation on any of these, type e.g. <b>gogo doc Readable&lt;&lt;Char&gt;&gt;</b> or <b>gogo doc "Reader&lt;&lt;String&gt;&gt;::peek"</b>.
</p>
<dl><dt> Readable&lt;&lt;DataType&gt;&gt;
</dt><dd> Classes incorporating this aspect define the method <i>create_reader().Reader&lt;&lt;DataType&gt;&gt;</i>.
</dd></dl>
<dl><dt> Reader&lt;&lt;DataType&gt;&gt;
</dt><dd> Classes incorporating this aspect define the methods <i>has_another().Logical, read().DataType</i>, and <i>peek().DataType</i>.
</dd></dl>
<dl><dt> LineReader
</dt><dd> Utility Reader&lt;&lt;String&gt;&gt; class that wraps a Reader&lt;&lt;Char&gt;&gt; or Readable&lt;&lt;Char&gt;&gt; and returns one line at a time (discarding the newlines).  Example:
</dd></dl>
<pre> forEach (line in LineReader(File("data.txt"))) println(data)
</pre>
<dl><dt> FileReader
</dt><dd> An extended Reader&lt;&lt;Char&gt;&gt; returned from a call to <i>File::create_reader()</i>.
</dd></dl>
<dl><dt> Scanner
</dt><dd> Primary way of parsing text data.  Create with a String or File parameter, then call <i>next_is_Int32().Logical</i>, <i>scan_Int32().Int32</i>, etc.  Unlike the Java Scanner it will fail rather than skip input if asked to read a certain type of data that is not the next value.
</dd></dl>
<dl><dt> ParseReader
</dt><dd> An excellent class for writing custom compilers.
</dd></dl>
<dl><dt> BitReader
</dt><dd> A specialized Reader&lt;&lt;Char&gt;&gt; that can read arbitrary numbers of bits at a time.  You must [include "bit_io.slag"] before you can use in code or obtain a doc listing.
</dd></dl>
<a name="Common_Writer_Classes_and_Aspects" id="Common_Writer_Classes_and_Aspects"></a><h2> <span class="mw-headline"> Common Writer Classes and Aspects </span></h2>
<dl><dt> Writable&lt;&lt;DataType&gt;&gt;
</dt><dd> Classes incorporating this aspect define the method <i>create_writer().Writer&lt;&lt;DataType&gt;&gt;</i>.
</dd></dl>
<dl><dt> Writer&lt;&lt;DataType&gt;&gt;
</dt><dd> Classes incorporating this aspect define the methods <i>write(DataType)</i>, <i>flush()</i>, and <i>close()</i>.
</dd></dl>
<dl><dt> TextWriter
</dt><dd> An extended Writer&lt;&lt;Char&gt;&gt; that defines various print() operations for encoding data into character form.
</dd></dl>
<dl><dt> FileWriter
</dt><dd> An extended Writer&lt;&lt;Char&gt;&gt; returned from a call to <i>File::create_writer()</i> or <i>File::create_appender()</i>.
</dd></dl>
<dl><dt> BitWriter
</dt><dd> A specialized Writer&lt;&lt;Char&gt;&gt; that can write arbitrary numbers of bits at a time.  You must [include "bit_io.slag"] before you can use in code or obtain a doc listing.
</dd></dl>
<a name="Using_StringBuilder" id="Using_StringBuilder"></a><h2> <span class="mw-headline"> Using StringBuilder </span></h2>
<pre> local StringBuilder buffer()
 buffer.println( "Coordinates ($,$)" (3,4) )
 buffer.println( "END OF LINE" )
 local String st = buffer.to_String
 println( st )  # prints: Coordinates (3,4)
                #         END OF LINE
</pre>
<a name="Working_with_Files" id="Working_with_Files"></a><h2> <span class="mw-headline"> Working with Files </span></h2>
<a name="Read_Every_Character_From_A_File" id="Read_Every_Character_From_A_File"></a><h3> <span class="mw-headline"> Read Every Character From A File </span></h3>
<pre> forEach (ch in File("data.txt")) print( ch + "." )
</pre>
<a name="Load_a_File_as_a_Byte_List" id="Load_a_File_as_a_Byte_List"></a><h3> <span class="mw-headline"> Load a File as a Byte List </span></h3>
<pre> local Byte[] bytes = File("data.txt").load
</pre>
<a name="Load_a_File_as_a_String" id="Load_a_File_as_a_String"></a><h3> <span class="mw-headline"> Load a File as a String </span></h3>
<pre> local String st = String.create_from( File("data.txt" )
</pre>
<a name="Load_Each_Line_of_a_File_as_a_String" id="Load_Each_Line_of_a_File_as_a_String"></a><h3> <span class="mw-headline"> Load Each Line of a File as a String </span></h3>
<pre> forEach (line in LineReader(File("data.txt"))) println(line)
</pre>
<a name="Creating_a_Text_File" id="Creating_a_Text_File"></a><h3> <span class="mw-headline"> Creating a Text File </span></h3>
<pre> local var writer = File("file.txt").create_writer
 writer.println( "Print" );
 writer.println( stuff );
 writer.close
</pre>
<a name="Creating_a_Binary_File" id="Creating_a_Binary_File"></a><h3> <span class="mw-headline"> Creating a Binary File </span></h3>
<pre> local BitWriter writer( File("file.bin").create_writer )
 writer.write( ch )     # write 'ch' in 8 bits
 writer.write( x, 16 )  # write 'x' in 16 bits
 writer.write( b, 1 )   # write 'b' in 1 bit
 writer.close
</pre>
<a name="Reading_a_Binary_File" id="Reading_a_Binary_File"></a><h3> <span class="mw-headline"> Reading a Binary File </span></h3>
<pre> local BitReader reader( File("file.bin").create_reader )
 local Char ch = reader.read
 local Int32 x = reader.read(16)
 local Logical b = (reader.read(1) == 1)
 reader.close
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 12/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:98-0!1!0!!en!2!edit=0 and timestamp 20120628115023 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Slag:Readers_and_Writers</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 24 January 2011, at 06:39.</li>
					<li id="viewcount">This page has been accessed 1,728 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.322 secs. --><br></body></html>
