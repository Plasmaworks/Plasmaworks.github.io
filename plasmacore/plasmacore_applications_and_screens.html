<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="Plasmacore:Applications and Screens" />
		<link rel="shortcut icon" href="http://plasmaworks.com/sites/default/files/sky_favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Plasmaworks (en)" />
		<link rel="alternate" type="application/rss+xml" title="Plasmaworks RSS Feed" href="" />
		<link rel="alternate" type="application/atom+xml" title="Plasmaworks Atom Feed" href="" />
		<title>Plasmacore:Applications and Screens - Plasmaworks</title>
		<link rel="stylesheet" href="shared.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="commonprint.css" type="text/css" media="print" />
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="ie50fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="ie55fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="ie60fixes.css" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="ie70fixes.css" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" media="print" />
		<link rel="stylesheet" href="" type="text/css" />
		<link rel="stylesheet" href="" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php/$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.plasmaworks.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Plasmacore:Applications_and_Screens";
		var wgTitle = "Plasmacore:Applications and Screens";
		var wgAction = "view";
		var wgArticleId = "129";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 969;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="wikibits.js_207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="ajax.js_207"></script>
		<script type="text/javascript" src=""><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Plasmacore_Applications_and_Screens skin-monobook">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Plasmacore:Applications and Screens</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Plasmaworks</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Class_Application"><span class="tocnumber">1</span> <span class="toctext">Class Application</span></a></li>
<li class="toclevel-1"><a href="#Class_Screen"><span class="tocnumber">2</span> <span class="toctext">Class Screen</span></a>
<ul>
<li class="toclevel-2"><a href="#Class_Methods"><span class="tocnumber">2.1</span> <span class="toctext">Class Methods</span></a></li>
<li class="toclevel-2"><a href="#Lifecycle_Events"><span class="tocnumber">2.2</span> <span class="toctext">Lifecycle Events</span></a></li>
<li class="toclevel-2"><a href="#Update_Cycle_and_Input"><span class="tocnumber">2.3</span> <span class="toctext">Update Cycle and Input</span></a></li>
<li class="toclevel-2"><a href="#Transfer_of_Control"><span class="tocnumber">2.4</span> <span class="toctext">Transfer of Control</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Example"><span class="tocnumber">3</span> <span class="toctext">Example</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Class_Application" id="Class_Application"></a><h2> <span class="mw-headline"> Class Application </span></h2>
<p>In a Plasmacore program, class Application acts as the primary event dispatcher and program manager.  You generally do not need to interact with it directly, though you may wish to install a custom ExitRequestHandler.  Type "gogo doc Application::exit_request_handler" for more information.
</p><p><br />
</p>
<a name="Class_Screen" id="Class_Screen"></a><h2> <span class="mw-headline"> Class Screen </span></h2>
<p>A Plasmacore Screen provides program state, view, and control.  The application maintains a Screen <i>stack</i>, with the topmost screen on the stack having active control.  Your main class (topmost or specified with [main {classname}]) should extend class Screen; the program will start there.
</p><p>Each Screen has the following methods.
</p>
<a name="Class_Methods" id="Class_Methods"></a><h3> <span class="mw-headline"> Class Methods </span></h3>
<dl><dt> <i>current()</i>
</dt><dd> This method returns the active screen (same as Application.screen).
</dd></dl>
<a name="Lifecycle_Events" id="Lifecycle_Events"></a><h3> <span class="mw-headline"> Lifecycle Events </span></h3>
<dl><dt> <i>init(...)</i>
</dt><dd> As with any class, the initializer is called when you first create an object of the class.
</dd></dl>
<dl><dt> <i>on_activate()</i>
</dt><dd> This method is called when a screen is about to have <i>update()</i> and/or <i>draw()</i> called on it for the first time.  This is sometimes a while after the screen is created, so on_activate() is a good place to put timing-sensitive commands.
</dd></dl>
<dl><dt> <i>on_suspend()</i>
</dt><dd> This method is called whenever a screen is about to become inactive.
</dd></dl>
<dl><dt> <i>on_deactivate()</i>
</dt><dd> This method is called when a screen is about to become permanently replaced.
</dd></dl>
<p>Examples assuming screen 1 is the active screen:
</p>
<table class="slagdoc">
<tr>
<th> Action
</th><th> Events
</th></tr>
<tr>
<td> screen1.push(screen2)
</td><td> screen1.on_suspend()
<p>screen2.on_activate()
</p>
</td></tr>
<tr>
<td> screen1.replace_with(screen2)
</td><td> screen1.on_suspend()
<p>screen1.on_deactivate()<br />
screen2.on_activate()
</p>
</td></tr>
<tr>
<td> screen2.pop
</td><td> screen2.on_suspend()
<p>screen2.on_deactivate()<br />
screen1.on_resume    # assuming screen1 is the prior screen
</p>
</td></tr></table>
<dl><dt> <i>on_resume()</i>
</dt><dd> Called when another active screen that was push()ed on this one relinquishes control (via <i>advance()</i> or <i>pop()</i>) and this screen becomes active once more.  Note that if the resumed screen has never had an update or draw, its <i>on_activate()</i> is called instead of its <i>on_resume()</i>.
</dd></dl>
<dl><dt> <i>on_images_lost()</i>
</dt><dd> Called on all screens when image data has been irrevocably lost.  Currently only happens on Android due to app switching.  Generally you don't need to do anything, but if you're using any OffscreenBuffer object or Image objects created with custom Bitmap data then you'll need to recreate them.
</dd></dl>
<a name="Update_Cycle_and_Input" id="Update_Cycle_and_Input"></a><h3> <span class="mw-headline"> Update Cycle and Input </span></h3>
<dl><dt> <i>update()</i>
</dt><dd> When a screen is the active screen on the stack, its <i>update()</i> method is called 60 times per second.  Update your game state in this method.
</dd></dl>
<dl><dt> <i>draw()</i>
</dt><dd> When a screen is the active screen on the stack, its <i>draw()</i> method is called up to 60 times per second.  Draw the current game state here.
</dd></dl>
<dl><dt> <i>on(MouseEvent e)</i>
</dt></dl>
<ul><li> Called for each kind of mouse input.
</li></ul>
<pre> # TECHNIQUE 1
 method on( MouseEvent e )
   if (e.is_button_press)
     println( "button #$ of mouse #$ pressed at position $." (e.button,e.mouse_id,e.position) )
   elseIf (e.is_button_release or e.is_movement)
     println( "Similar stuff" )
   else
     println( "Something else" )
   endIf
 
 # TECHNIQUE 2
 method on( MouseEvent e )
   which (e.type)
     case MouseEvent.button_press
       println( "button #$ of mouse #$ pressed at position $." (e.button,e.mouse_id,e.position) )
     case MouseEvent.button_release, MouseEvent.movement
       println( "Similar stuff" )
     others
       println( "Something else" )
   endWhich
</pre>
<ul><li> For multitouch devices, each different touch registers as a different mouse id.
</li><li> See class Input for other mouse-related info.
</li></ul>
<dl><dt> <i>on(KeyEvent e)</i></dt><dd>
</dd></dl>
<ul><li> Called for each keyboard event type (press, release, repeat - e.g. key.type == KeyEvent.type_press).
</li><li> Compare e.keycode to Key.keycode_escape, etc.
</li><li> Compare e.unicode to 'A', '!', etc.
</li><li> Use e.is_press('A') or e.is_press(Key.keycode_a), etc.
</li><li> See class Input for other keyboard-related info and methods, including "Input.keyboard_visible = true" for virtual keyboards.
</li></ul>
<dl><dt> <i>on(AccelerationEvent e)</i>
</dt></dl>
<ul><li> Called on platforms that have accelerometer input. 
</li><li> Use the gravity readings of e.x, e.y, and e.z.
</li><li> Call e.orientation() to obtain RollPitchYaw orientation data with roll, pitch, and yaw.
</li></ul>
<a name="Transfer_of_Control" id="Transfer_of_Control"></a><h3> <span class="mw-headline"> Transfer of Control </span></h3>
<dl><dt> <i>push(Screen,[Int32 fade_style])</i>
</dt><dd> Push another screen on top of this one, allowing it to assume control.  You can pass Screen.fade_none (the default), Screen.fade_between (the most common fade), Screen.fade_in, or Screen.fade_out.
</dd></dl>
<dl><dt> <i>pop([Int32 fade_style])</i>
</dt><dd> Removes this screen from the stack and allows the previous screen to resume control.
</dd></dl>
<dl><dt> <i>replace_with(Screen,[Int32 fade_style])</i>
</dt><dd> Replaces this screen with the given screen.
</dd></dl>
<dl><dt> <i>chain(Screen)</i>
</dt><dd> Specifies a screen to be the "next" screen after this one.  See <i>advance()</i>, below.
</dd></dl>
<dl><dt> <i>advance([Int32 fade_style])</i>
</dt><dd> If a "next" screen is specified, performs a <i>replace_with()</i>.  Otherwise performs a <i>pop()</i>.
</dd></dl>
<p><br />
</p>
<a name="Example" id="Example"></a><h2> <span class="mw-headline"> Example </span></h2>
<pre> # Demonstrates using Screens as game states.  A Title Screen alternates
 # with a Controls Screen until a tap (aka click).  The app then transitions
 # to a Game Screen that can become a Pause Screen with a tap.
 class TitleScreen&nbsp;: Screen
   PROPERTIES
     stopwatch()&nbsp;: Stopwatch
 
   METHODS
     method init
 
     method on_activate
       Display.background_color = Color.red
 
     method update
       if (stopwatch.elapsed_seconds &gt; 2) replace_with( ControlsScreen() )
 
     method draw
       SystemFont.handle = Handle.center
       SystemFont.draw( "TITLE SCREEN\n\nTap to Start", Display.center )
 
     method on( MouseEvent e )
       if (e.is_button_press) replace_with( GameScreen(), Screen.fade_between )
 endClass
 
 class ControlsScreen&nbsp;: Screen
   PROPERTIES
     stopwatch()&nbsp;: Stopwatch
 
   METHODS
     method init
 
     method on_activate
       Display.background_color = Color.yellow
 
     method update
       if (stopwatch.elapsed_seconds &gt; 2) replace_with( TitleScreen() )
 
     method draw
       SystemFont.handle = Handle.center
       SystemFont.draw( "CONTROLS SCREEN\n\nTap to Start", Display.center )
 
     method on( MouseEvent e )
       if (e.is_button_press) replace_with( GameScreen(), Screen.fade_between )
 endClass
 
 class GameScreen&nbsp;: Screen
   METHODS
     method init
 
     method on_activate
       on_resume
 
     method on_resume
       Display.background_color = Color.blue
 
     method draw
       SystemFont.handle = Handle.center
       SystemFont.draw( "GAME PLAY\n\nTap to Pause", Display.center )
 
     method on( MouseEvent e )
       if (e.is_button_press) push( PauseScreen() )
 endClass
 
 class PauseScreen&nbsp;: Screen
   METHODS
     method init
 
     method on_activate
       on_resume
 
     method on_resume
       Display.background_color = Color.gray
 
     method draw
       SystemFont.handle = Handle.center
       SystemFont.draw( "PAUSED\n\nTap to Resume", Display.center )
 
     method on( MouseEvent e )
       if (e.is_button_press) pop
 endClass
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 8/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pw_mediawiki_user:pcache:idhash:129-0!1!0!!en!2!edit=0 and timestamp 20120628114432 -->
<div class="printfooter">
Retrieved from "<a href="">http://www.plasmaworks.com/wiki/index.php/Plasmacore:Applications_and_Screens</a>"</div>
						<!-- end content --><div class="visualClear"></div></div></div></div>
    <div id="column-one">
      <div id="p-cactions" class="portlet"></div>
      <div class="portlet" id="p-personal"></div>
      <div class="portlet" id="p-logo"></div>
      <div class="portlet" id="p-nav">
  
      </div>
      <div id="p-search" class="portlet"></div>
      <div class="portlet" id="p-tb"></div>
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footerHacked">
				<ul id="f-list">
					<li id="lastmod"> This page was last modified on 5 April 2011, at 11:10.</li>
					<li id="viewcount">This page has been accessed 1,229 times.</li>
					<li id="privacy"><a href="plasmaworks_privacy_policy.html" title="Plasmaworks:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="plasmaworks_about.html" title="Plasmaworks:About">About Plasmaworks</a></li>
					<li id="disclaimer"><a href="plasmaworks_general_disclaimer.html" title="Plasmaworks:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.241 secs. --><br></body></html>
